<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manual Interactivo Incoterms¬Æ 2020</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel para JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Fuente Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        .transition-width { transition: width 0.5s ease-in-out; }
        
        /* Estilos para el posicionamiento absoluto de los iconos sobre las barras */
        .bar-container-relative { 
            position: relative; 
        }
        .bar-icon-absolute { 
            position: absolute; 
            top: 50%; /* Centra verticalmente */
            transform: translate(-50%, -50%); 
            z-index: 20; 
            /* Se estandariza el tama√±o a 24x24px */
            height: 24px;
            width: 24px;
            /* A√±adir sombra para que resalte sobre la barra */
            filter: drop-shadow(0 0 2px rgba(0,0,0,0.5));
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Iconos SVG de Transporte y Personas ---
        const IconShip = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9 1 2.5 1S13.2 20 14.5 20c1.9 0 2.4 1 2.5 1 .5.5 1 1 1.5 1 2 0 3-2 3.5-2.5"/><path d="M19.38 20A11.6 11.6 0 0 0 21 14l-9-4-9 4c0 2.9.9 5.8 2.8 8"/><path d="M10 10V4a2 2 0 0 1 2-2h0a2 2 0 0 1 2 2v6"/><polyline points="8 15 12 17 16 15"/><path d="M2.1 14.8c.2-.5.5-.8 1-.6s.8.5.6 1c-.2.5-.5.8-1 .6s-.8-.5-.6-1z"/><path d="M20.9 14.8c.2.5.5-.8 1 .6s.8-.5.6-1c-.2.5-.5.8-1 .6s-.8.5-.6-1z"/></svg>
        );
        const IconTruck = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="16" height="13" x="2" y="5" rx="2"/><path d="M16 5v3.68a2 2 0 0 0 .54 1.35l2.5 2.65a2 2 0 0 1 .46 1.32V18"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
        );
        const IconTrain = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M6 3v20"/><path d="M18 3v20"/><path d="M4 11h16"/><path d="M4 15h16"/><path d="M14 3v8h-4V3"/><path d="M14 15v5h-4v-5"/></svg>
        );
        const IconPlane = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M17.8 12.8 22 10.4c.7-.4.7-1.4 0-1.8L17.8 6.2c-.3-.2-.5-.4-.6-.7L16.2 2c-.2-.5-.8-.5-1 0L13.2 5.5c-.1.3-.3.5-.6.7L9.8 8.6c-.7.4-.7 1.4 0 1.8L13.2 13.5c.3.2.5.4.6.7L16 18.2c.2.5.8.5 1 0l2.8-5.3c.1-.3.3-.5.6-.7z"/></svg>
        );
        const IconAlert = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></svg>
        );
        const IconPresentation = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="20" height="14" x="2" y="3" rx="2"/><line x1="8" x2="16" y1="21" y2="21"/><line x1="12" x2="12" y1="17" y2="21"/></svg>
        );
        const IconCheck = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="20 6 9 17 4 12"/></svg>
        );
        const IconX = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M18 6 6 18M6 6l12 12"/></svg>
        );
        
        // Iconos de Rol
        const IconWoman = ({ className }) => (
            // Vendedor: Mujer
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="5" r="3"/><path d="M7 22v-3.5C7 16 10 14 12 14s5 2 5 4.5V22"/></svg>
        );
        const IconMan = ({ className }) => (
            // Comprador: Hombre
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="7" r="4"/><path d="M18 22v-2a4 4 0 0 0-4-4h-4a4 4 0 0 0-4 4v2"/></svg>
        );

        // --- ICONOS DE BARRAS ---
        const IconBox = ({ className }) => (
            // Caja de Carga (para el Riesgo - Universal)
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" className={className}>
              {/* Box exterior (s√≥lido) */}
              <path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/>
              {/* L√≠nea blanca divisoria interna para mejor visualizaci√≥n */}
              <path fill="#ffffff" d="m12 15 5-2.8-5-3-5 3 5 2.8Z"/>
            </svg>
        );
        
        const IconDollar = ({ className }) => (
            // Icono de D√≥lar/Moneda (para Costo)
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="1" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2Z" fill="currentColor" stroke="none"/>
                <path d="M11.75 14h.5a.75.75 0 0 0 0-1.5h-.5a2.25 2.25 0 1 1 0-4.5h2.5M10.5 7v1M13.5 16v-1" fill="none" stroke="#fff" strokeWidth="2"/>
                <circle cx="12" cy="12" r="9" fill="none" stroke="#fff" strokeWidth="1.5"/>
            </svg>
        );


        // Funci√≥n para seleccionar un icono basado en el Incoterm (para el sidebar y el panel principal)
        const getTermIcon = (termId, termType, className) => {
            if (termType === 'sea') {
                return <IconShip className={className} />; // Buque para mar√≠timo
            }
            
            // Rotaci√≥n para los Incoterms de "Cualquier Modo"
            switch (termId) {
                case 'EXW':
                case 'FCA':
                    return <IconTruck className={className} />;
                case 'CPT':
                case 'CIP':
                    return <IconTrain className={className} />;
                case 'DAP':
                case 'DPU':
                case 'DDP':
                    return <IconPlane className={className} />;
                default:
                    return <IconTruck className={className} />;
            }
        };

        // --- Base de Datos de Incoterms (ACTUALIZADA con precisiones de ICC) ---
        const incotermsData = [
            // Reglas 'E' y 'F' (Baja obligaci√≥n del vendedor)
            { id: 'EXW', name: 'EXW - Ex Works', desc: 'En F√°brica', sellerRisk: 10, buyerRisk: 90, sellerCost: 10, buyerCost: 90, type: 'any', details: 'El vendedor solo entrega en sus instalaciones. El comprador asume casi TODOS los costos, riesgos y la exportaci√≥n. **ADVERTENCIA: Usar con precauci√≥n en comercio internacional.**' },
            { id: 'FCA', name: 'FCA - Free Carrier', desc: 'Franco Porteador', sellerRisk: 25, buyerRisk: 75, sellerCost: 25, buyerCost: 75, type: 'any', details: 'El riesgo se transfiere al entregar al transportista en el lugar acordado. El vendedor gestiona la exportaci√≥n.' },
            
            // Reglas 'C' (Separaci√≥n de Riesgo y Costo - Riesgo termina temprano, Costo termina tarde)
            { id: 'CPT', name: 'CPT - Carriage Paid To', desc: 'Transporte Pagado Hasta', 
              sellerRisk: 25, buyerRisk: 75, // Riesgo se transfiere al primer transportista (origen)
              sellerCost: 65, buyerCost: 35, // El vendedor paga el flete hasta el destino, pero no el costo final.
              type: 'any', details: 'El vendedor PAGA el transporte hasta destino (Costo), pero el RIESGO se transfiere al comprador al entregar al PRIMER transportista (Origen - Regla C).' },
            { id: 'CIP', name: 'CIP - Carriage & Insurance Paid', desc: 'Transporte y Seguro Pagados', 
              sellerRisk: 25, buyerRisk: 75, // Riesgo se transfiere al primer transportista (origen)
              sellerCost: 75, buyerCost: 25, // Vendedor paga transporte y SEGURO de cobertura amplia (Cl√°usula A).
              type: 'any', details: 'Similar a CPT, pero el vendedor debe contratar un seguro de cobertura **amplia (Cl√°usula A)** a favor del comprador.' },
            
            // Reglas 'D' (Alta obligaci√≥n del vendedor)
            { id: 'DAP', name: 'DAP - Delivered at Place', desc: 'Entregada en Lugar', sellerRisk: 85, buyerRisk: 15, sellerCost: 85, buyerCost: 15, type: 'any', details: 'El vendedor asume riesgos y costos hasta el lugar de destino, lista para descargar (sin descargar). El comprador gestiona la importaci√≥n.' },
            { id: 'DPU', name: 'DPU - Delivered at Place Unloaded', desc: 'Entregada y Descargada', sellerRisk: 90, buyerRisk: 10, sellerCost: 90, buyerCost: 10, type: 'any', details: 'El vendedor asume todo, incluyendo la **DESCARGA** en el lugar de destino. Es la √∫nica regla que exige esto al vendedor.' },
            { id: 'DDP', name: 'DDP - Delivered Duty Paid', desc: 'Entregada Derechos Pagados', sellerRisk: 98, buyerRisk: 2, sellerCost: 98, buyerCost: 2, type: 'any', details: 'M√°xima obligaci√≥n del vendedor. Asume todos los riesgos, costos, e incluye el pago de impuestos y aduanas de IMPORTACI√ìN.' },
            
            // Reglas Mar√≠timas 'F'
            { id: 'FAS', name: 'FAS - Free Alongside Ship', desc: 'Franco al Costado del Buque', sellerRisk: 35, buyerRisk: 65, sellerCost: 35, buyerCost: 65, type: 'sea', details: 'Solo mar√≠timo. El riesgo y el costo pasan cuando la mercanc√≠a est√° **AL COSTADO** del buque en el puerto de embarque. **ADVERTENCIA: Usar FCA para contenedores.**' },
            { id: 'FOB', name: 'FOB - Free On Board', desc: 'Franco a Bordo', sellerRisk: 45, buyerRisk: 55, sellerCost: 45, buyerCost: 55, type: 'sea', details: 'Solo mar√≠timo. El riesgo y el costo pasan cuando la carga est√° **A BORDO** del buque. ¬°Usar FCA para contenedores!' },
            
            // Reglas Mar√≠timas 'C' (Separaci√≥n de Riesgo y Costo - Riesgo termina a bordo, Costo termina en destino)
            { id: 'CFR', name: 'CFR - Cost and Freight', desc: 'Costo y Flete', 
              sellerRisk: 45, buyerRisk: 55, // Riesgo se transfiere cuando la carga est√° A BORDO (origen)
              sellerCost: 70, buyerCost: 30, // Vendedor paga el flete hasta destino.
              type: 'sea', details: 'El vendedor PAGA el transporte hasta destino (Costo), pero el RIESGO se transfiere al comprador cuando la mercanc√≠a est√° **A BORDO** en origen.' },
            { id: 'CIF', name: 'CIF - Cost, Insurance & Freight', desc: 'Costo, Seguro y Flete', 
              sellerRisk: 45, buyerRisk: 55, // Riesgo se transfiere cuando la carga est√° A BORDO (origen)
              sellerCost: 80, buyerCost: 20, // Vendedor paga flete y SEGURO b√°sico (Cl√°usula C).
              type: 'sea', details: 'Similar a CFR, pero el vendedor debe contratar un seguro de cobertura **m√≠nima (Cl√°usula C)** a favor del comprador.' },
        ];

        // --- DATA DE DETALLES DE RIESGOS Y COSTOS PARA EL ASISTENTE (ICC Checklist) ---
        const incotermsDetails = {
            'EXW': {
                sellerRisks: ['Riesgo m√≠nimo (solo en el almac√©n).'],
                buyerRisks: ['Todos los riesgos desde la recogida.', 'Riesgo de da√±o durante la carga (si la hace el comprador).', 'Riesgos totales en transporte principal.'],
                sellerCosts: ['Costo de embalaje y etiquetado.'],
                buyerCosts: ['Carga en origen.', 'Transporte principal.', 'Seguro.', 'Aduanas y tasas de exportaci√≥n e importaci√≥n.'],
                warning: 'No recomendado para transacciones internacionales debido a problemas de prueba de exportaci√≥n.'
            },
            'FCA': {
                sellerRisks: ['Riesgo hasta la entrega al primer transportista.'],
                buyerRisks: ['Todos los riesgos desde la entrega al primer transportista.', 'Riesgo de da√±o en el transporte principal.'],
                sellerCosts: ['Embalaje.', 'Carga en origen.', 'Formalidades de exportaci√≥n y tasas.'],
                buyerCosts: ['Transporte principal (flete).', 'Seguro (Opcional, pero recomendado).', 'Descarga en destino.', 'Formalidades de importaci√≥n y tasas.'],
                warning: 'Regla F ideal para carga en contenedor (FCL/LCL) en cualquier modo de transporte.'
            },
            'CPT': {
                sellerRisks: ['Riesgo hasta la entrega al primer transportista (Riesgo en Origen).'],
                buyerRisks: ['Todos los riesgos desde la entrega al primer transportista (Riesgo en Origen).'],
                sellerCosts: ['Embalaje.', 'Formalidades de exportaci√≥n.', 'Flete principal hasta el destino convenido (Costo en Destino).'],
                buyerCosts: ['Seguro (Opcional, pero recomendado).', 'Descarga en destino.', 'Formalidades de importaci√≥n y tasas.', 'Costos adicionales por demora en puerto (Demurrage) en destino.'],
                warning: 'Separaci√≥n de Riesgo (Origen) y Costo (Destino). Ideal para transporte multimodal.'
            },
            'CIP': {
                sellerRisks: ['Riesgo hasta la entrega al primer transportista (Riesgo en Origen).'],
                buyerRisks: ['Todos los riesgos desde la entrega al primer transportista (Riesgo en Origen).'],
                sellerCosts: ['Embalaje.', 'Formalidades de exportaci√≥n.', 'Flete principal hasta el destino convenido.', 'Seguro (OBLIGATORIO: Cobertura amplia Cl√°usula A).'],
                buyerCosts: ['Descarga en destino.', 'Formalidades de importaci√≥n y tasas.', 'Costos adicionales por demora en puerto (Demurrage) en destino.'],
                warning: 'Similar a CPT, pero requiere seguro de **m√°xima cobertura (Cl√°usula A)**, que cubre los riesgos del comprador.'
            },
            'DAP': {
                sellerRisks: ['M√°ximo riesgo: Hasta que la mercanc√≠a est√° lista para la descarga en el lugar de destino.'],
                buyerRisks: ['Riesgo de descarga en destino.', 'Riesgo durante la aduana de importaci√≥n.'],
                sellerCosts: ['Transporte principal, seguro y todos los costos hasta el destino (sin incluir la descarga).'],
                buyerCosts: ['Descarga en destino.', 'Formalidades de importaci√≥n, impuestos y tasas.'],
                warning: 'El vendedor NO es responsable de la descarga ni de las formalidades de importaci√≥n.'
            },
            'DPU': {
                sellerRisks: ['M√°ximo riesgo: Hasta que la mercanc√≠a est√° **descargada** en el lugar de destino.'],
                buyerRisks: ['Riesgo durante la aduana de importaci√≥n.'],
                sellerCosts: ['Transporte principal, seguro, todos los costos y la **DESCARGA** en el lugar de destino.'],
                buyerCosts: ['Formalidades de importaci√≥n, impuestos y tasas.'],
                warning: '√önica regla que hace al vendedor responsable de la DESCARGA en el lugar de destino.'
            },
            'DDP': {
                sellerRisks: ['Riesgo total: Hasta que la mercanc√≠a est√° lista para la descarga en el destino final.'],
                buyerRisks: ['Riesgo m√≠nimo (solo la descarga).'],
                sellerCosts: ['M√°ximo costo: Transporte, seguro, exportaci√≥n, importaci√≥n y aranceles (Delivered Duty Paid).'],
                buyerCosts: ['Descarga en destino.'],
                warning: 'M√°xima obligaci√≥n para el vendedor. Asumir la aduana de importaci√≥n puede ser complejo para el vendedor.'
            },
            'FAS': {
                sellerRisks: ['Riesgo hasta que la mercanc√≠a est√° **al costado del buque** en el puerto de embarque.'],
                buyerRisks: ['Riesgo desde que la mercanc√≠a est√° al costado del buque.', 'Riesgo de carga a bordo.', 'Riesgos totales en transporte principal.'],
                sellerCosts: ['Embalaje.', 'Formalidades de exportaci√≥n.', 'Entrega al muelle (al costado del buque).'],
                buyerCosts: ['Carga a bordo.', 'Flete principal y seguro.', 'Formalidades de importaci√≥n.'],
                warning: 'Exclusivo mar√≠timo (carga general). **Usar FCA si es contenedor**.'
            },
            'FOB': {
                sellerRisks: ['Riesgo hasta que la mercanc√≠a est√° **a bordo del buque** en el puerto de embarque.'],
                buyerRisks: ['Riesgo desde que la mercanc√≠a est√° a bordo del buque.', 'Riesgos totales en transporte principal.'],
                sellerCosts: ['Embalaje.', 'Formalidades de exportaci√≥n.', 'Entrega y carga a bordo.'],
                buyerCosts: ['Flete principal y seguro.', 'Formalidades de importaci√≥n.'],
                warning: 'Exclusivo mar√≠timo (carga general). **Usar FCA si es contenedor**.'
            },
            'CFR': {
                sellerRisks: ['Riesgo hasta que la mercanc√≠a est√° **a bordo del buque** (Riesgo en Origen).'],
                buyerRisks: ['Riesgo desde que la mercanc√≠a est√° a bordo del buque (Riesgo en Origen).'],
                sellerCosts: ['Embalaje.', 'Formalidades de exportaci√≥n.', 'Flete principal hasta el puerto de destino (Costo en Destino).'],
                buyerCosts: ['Descarga en destino.', 'Seguro (Opcional, pero recomendado).', 'Formalidades de importaci√≥n y tasas.'],
                warning: 'Separaci√≥n de Riesgo (Origen) y Costo (Destino). Exclusivo mar√≠timo.'
            },
            'CIF': {
                sellerRisks: ['Riesgo hasta que la mercanc√≠a est√° **a bordo del buque** (Riesgo en Origen).'],
                buyerRisks: ['Riesgo desde que la mercanc√≠a est√° a bordo del buque (Riesgo en Origen).'],
                sellerCosts: ['Embalaje.', 'Formalidades de exportaci√≥n.', 'Flete principal hasta el puerto de destino.', 'Seguro (OBLIGATORIO: Cobertura m√≠nima Cl√°usula C).'],
                buyerCosts: ['Descarga en destino.', 'Formalidades de importaci√≥n y tasas.'],
                warning: 'Similar a CFR, pero incluye seguro de **cobertura m√≠nima (Cl√°usula C)** a cargo del vendedor.'
            }
        };

        // --- NUEVA DATA DEL REPORTE IBEROAMERICANO (Observancia de la ICC) ---
        const observanceData = {
            generalUse: {
                totalObservance: 81, // % que usa Incoterms 2020 seg√∫n reglamento
                totalNonObservance: 19, // % que usa t√©rminos distintos
            },
            containerNonObservance: {
                totalNonObservance: 85, // % que no aplica la recomendaci√≥n de la ICC para contenedores (Gr√°fico 9)
                nonObservanceByCountry: [
                    { country: 'Argentina', value: 87, label: 'No aplica (FOB/CFR/CIF)' }, // Estimado del gr√°fico 9
                    { country: 'Colombia', value: 80, label: 'No aplica (FOB/CFR/CIF)' },
                    { country: 'Costa Rica', value: 100, label: 'No aplica (FOB/CFR/CIF)' }, // 100% en el gr√°fico 9
                    { country: 'Ecuador', value: 77, label: 'No aplica (FOB/CFR/CIF)' },
                    { country: 'Espa√±a', value: 80, label: 'No aplica (FOB/CFR/CIF)' },
                    { country: 'M√©xico', value: 95, label: 'No aplica (FOB/CFR/CIF)' }, // 95% en el gr√°fico 9
                    { country: 'Panam√°', value: 80, label: 'No aplica (FOB/CFR/CIF)' }, // 80% en el gr√°fico 9
                ],
            }
        };

        // Componente que decide qu√© icono mostrar en la barra de riesgo y d√≥nde posicionarlo
        const RiskMarker = ({ term }) => {
            // Se utiliza IconBox universal para todos los t√©rminos
            let iconComponent = IconBox;
            let iconClassName = "bar-icon-absolute text-blue-500 w-6 h-6";
            let leftPosition = `${term.sellerRisk}%`;
            let tooltip = "El riesgo se transfiere en el punto de entrega especificado.";

            // Ajustamos el tooltip seg√∫n el t√©rmino
            if (term.id === 'FAS') {
                tooltip = "El riesgo se transfiere al costado del buque (puerto de embarque).";
            } else if (term.id === 'FOB' || term.id === 'CFR' || term.id === 'CIF') {
                tooltip = "El riesgo se transfiere a bordo del buque (puerto de embarque).";
            } else if (term.type === 'any') {
                // Esta etiqueta cubre EXW, FCA, CPT, CIP, DAP, DPU, DDP
                tooltip = "El riesgo se transfiere al primer transportista o en el lugar convenido.";
            }
            
            const Icon = iconComponent;

            return (
                <Icon 
                    className={iconClassName} 
                    style={{ left: leftPosition }} 
                    title={tooltip}
                />
            );
        };

        // --- Componentes ---

        const TermCard = ({ term, isSelected, onClick }) => (
            <button 
                onClick={onClick}
                className={`w-full text-left p-4 rounded-lg mb-2 transition-all border-l-4 shadow-sm hover:shadow-md ${
                    isSelected 
                    ? 'bg-blue-50 border-blue-600 ring-2 ring-blue-200' 
                    : 'bg-white border-gray-300 hover:bg-gray-50'
                }`}
            >
                <div className="flex justify-between items-center">
                    <h3 className="font-bold text-lg text-gray-800">{term.id}</h3>
                    {getTermIcon(term.id, term.type, term.type === 'sea' ? 'text-blue-500 w-5 h-5' : 'text-green-500 w-5 h-5')}
                </div>
                <p className="text-sm text-gray-500">{term.desc}</p>
            </button>
        );

        // Componente para mostrar la No Observancia ICC (Paso 5 del Asistente)
        const ObservanceAnalysis = ({ onReturn }) => {
            const data = observanceData.containerNonObservance;

            return (
                <div className="space-y-6">
                    <h3 className="text-2xl font-extrabold text-red-700 flex items-center gap-2">
                        <IconAlert className="w-8 h-8"/> Uso vs. Recomendaci√≥n ICC
                    </h3>
                    <p className="text-sm text-gray-600 border-l-4 border-red-400 pl-3 italic">
                        La recomendaci√≥n oficial de la ICC es usar **FCA** (o CPT/CIP) cuando la mercanc√≠a viaja en contenedor. El reporte Iberoamericano muestra que esta es una pr√°ctica con baja observancia.
                    </p>

                    {/* Gr√°fico de Barra General */}
                    <div className="bg-white p-4 rounded-lg shadow-md">
                        <h4 className="font-semibold text-lg mb-3">Promedio Iberoamericano (Contenedores)</h4>
                        <div className="flex items-center space-x-4">
                            {/* Porcentaje de No Observancia */}
                            <div className="text-4xl font-extrabold text-red-600 w-24 text-center">
                                {data.totalNonObservance}%
                            </div>
                            {/* Barra de Progreso */}
                            <div className="flex-grow bg-gray-200 rounded-full h-8 flex overflow-hidden">
                                <div 
                                    className="bg-red-500 h-full flex items-center justify-center text-white text-xs font-bold" 
                                    style={{width: `${data.totalNonObservance}%`}}
                                >
                                    No Aplica Recomendaci√≥n
                                </div>
                                <div 
                                    className="bg-green-500 h-full flex items-center justify-center text-white text-xs font-bold" 
                                    style={{width: `${100 - data.totalNonObservance}%`}}
                                >
                                    Aplica Recomendaci√≥n
                                </div>
                            </div>
                        </div>
                        <p className="text-xs text-gray-500 mt-2">Porcentaje de transacciones contenedorizadas que **NO** usan FCA/CPT/CIP (usan FOB/CFR/CIF), seg√∫n el reporte ICC 2023.</p>
                    </div>

                    {/* Distribuci√≥n por Pa√≠s (Mini Gr√°fico) */}
                    <div className="bg-white p-4 rounded-lg shadow-md">
                        <h4 className="font-semibold text-lg mb-4">No Observancia por Pa√≠s (Ejemplos)</h4>
                        <div className="space-y-3">
                            {data.nonObservanceByCountry.map((item) => (
                                <div key={item.country}>
                                    <div className="flex justify-between text-sm font-medium">
                                        <span>{item.country}</span>
                                        <span className="text-red-600">{item.value}%</span>
                                    </div>
                                    <div className="w-full bg-gray-200 rounded-full h-3">
                                        <div 
                                            className="bg-red-400 h-3 rounded-full" 
                                            style={{width: `${item.value}%`}}
                                            title={`${item.country}: ${item.value}%`}
                                        ></div>
                                    </div>
                                </div>
                            ))}
                        </div>
                        <p className="text-xs text-gray-500 mt-3">Fuente: Reporte Iberoamericano sobre el uso de las Reglas Incoterms 2020 (ICC 2023).</p>
                    </div>

                    <button onClick={onReturn} className="mt-6 bg-gray-200 text-gray-700 px-4 py-2 rounded shadow hover:bg-gray-300">
                        Volver al Asistente Principal
                    </button>
                </div>
            );
        };

        // Nuevo componente para mostrar el An√°lisis Detallado (Paso 4 del Asistente)
        const DetailAnalysis = ({ termId, onReturn, onShowObservance }) => {
            const termData = incotermsData.find(t => t.id === termId);
            const details = incotermsDetails[termId];

            const isSeaTerm = ['FAS', 'FOB', 'CFR', 'CIF'].includes(termId);

            return (
                <div className="space-y-6">
                    <h3 className="text-2xl font-extrabold text-indigo-700">{termData.id} - An√°lisis Detallado</h3>
                    <p className="text-sm text-gray-600 border-l-4 border-indigo-400 pl-3 italic">
                        {termData.details.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')}
                    </p>

                    <div className="grid md:grid-cols-2 gap-6">
                        
                        {/* Riesgos Clave */}
                        <div className="p-4 rounded-lg bg-red-50 border border-red-200">
                            <h4 className="font-bold text-lg text-red-700 flex items-center gap-2 mb-3">
                                <IconWoman className="w-5 h-5 text-blue-600"/> <IconMan className="w-5 h-5 text-orange-600"/>
                                Puntos Clave de RIESGO
                            </h4>
                            <ul className="space-y-2 text-sm text-gray-700">
                                {details.sellerRisks.map((risk, index) => (
                                    <li key={`sr-${index}`} className="flex items-start gap-2">
                                        <IconCheck className="w-4 h-4 text-blue-500 mt-1 flex-shrink-0" />
                                        <span className='font-medium text-blue-600'>Vendedor:</span> {risk}
                                    </li>
                                ))}
                                {details.buyerRisks.map((risk, index) => (
                                    <li key={`br-${index}`} className="flex items-start gap-2">
                                        <IconCheck className="w-4 h-4 text-orange-500 mt-1 flex-shrink-0" />
                                        <span className='font-medium text-orange-600'>Comprador:</span> {risk}
                                    </li>
                                ))}
                            </ul>
                        </div>

                        {/* Costos Cr√≠ticos */}
                        <div className="p-4 rounded-lg bg-green-50 border border-green-200">
                            <h4 className="font-bold text-lg text-green-700 flex items-center gap-2 mb-3">
                                <IconDollar className="w-5 h-5 text-green-600"/>
                                Costos Cr√≠ticos y Disputas
                            </h4>
                            <ul className="space-y-2 text-sm text-gray-700">
                                {details.sellerCosts.map((cost, index) => (
                                    <li key={`sc-${index}`} className="flex items-start gap-2">
                                        <IconCheck className="w-4 h-4 text-blue-500 mt-1 flex-shrink-0" />
                                        <span className='font-medium text-blue-600'>Vendedor Paga:</span> {cost}
                                    </li>
                                ))}
                                {details.buyerCosts.map((cost, index) => (
                                    <li key={`bc-${index}`} className="flex items-start gap-2">
                                        <IconCheck className="w-4 h-4 text-orange-500 mt-1 flex-shrink-0" />
                                        <span className='font-medium text-orange-600'>Comprador Paga:</span> {cost}
                                    </li>
                                ))}
                            </ul>
                        </div>
                    </div>

                    <div className="mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                        <h5 className="font-bold text-yellow-800">Nota Especial:</h5>
                        <p className="text-sm text-yellow-700">{details.warning}</p>
                    </div>

                    <div className="flex justify-between pt-4 border-t border-gray-200">
                         {isSeaTerm && (
                            <button 
                                onClick={onShowObservance} 
                                className="bg-red-600 text-white px-4 py-2 rounded shadow hover:bg-red-700 flex items-center gap-2 text-sm"
                                title="Ver c√≥mo se usa realmente este t√©rmino para contenedores"
                            >
                                <IconX className="w-4 h-4"/> Ver No Observancia ICC
                            </button>
                        )}
                        <button onClick={onReturn} className={`bg-gray-200 text-gray-700 px-4 py-2 rounded shadow hover:bg-gray-300 ${!isSeaTerm ? 'w-full' : ''}`}>
                            Volver al Asistente
                        </button>
                    </div>
                </div>
            );
        }

        const Wizard = ({ onRecommend }) => {
            const [step, setStep] = useState(1);
            const [transport, setTransport] = useState(null);
            const [finalRecommendation, setFinalRecommendation] = useState(null);
            
            const handleTransport = (type) => {
                setTransport(type);
                if (type === 'poly') {
                    setStep(3);
                } else {
                    setStep(2);
                }
            };

            const handleContainer = (isContainer) => {
                let recId;
                if (isContainer) {
                    recId = 'FCA'; 
                } else {
                    recId = 'FOB'; 
                }
                setFinalRecommendation(recId);
                setStep(3); // Saltar a la recomendaci√≥n final
            };

            const handleRecommendationAccept = (termId) => {
                setFinalRecommendation(termId);
                setStep(4); // Mostrar an√°lisis detallado
            };

            const handleShowObservance = () => {
                setStep(5); // Mostrar an√°lisis de observancia
            };

            const handleReturnToWizard = () => {
                setStep(1);
                setTransport(null);
                setFinalRecommendation(null);
            };

            if (step === 4) {
                return (
                    <div className="w-full max-w-4xl mx-auto">
                        <DetailAnalysis 
                            termId={finalRecommendation} 
                            onReturn={() => setStep(3)} // Regresar a la recomendaci√≥n inicial o el paso anterior.
                            onShowObservance={handleShowObservance}
                        />
                    </div>
                );
            }

            if (step === 5) {
                 return (
                    <div className="w-full max-w-4xl mx-auto">
                        <ObservanceAnalysis 
                            onReturn={() => setStep(4)} // Regresar al an√°lisis detallado
                        />
                    </div>
                );
            }

            return (
                <div className="bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                    <h2 className="text-xl font-bold mb-4 text-gray-800 flex items-center gap-2">
                        <span className="bg-indigo-100 text-indigo-600 p-1 rounded">üßô‚Äç‚ôÇÔ∏è</span> Asistente de Selecci√≥n
                    </h2>
                    
                    {step === 1 && (
                        <div className="space-y-3">
                            <p className="mb-4 font-semibold">Paso 1: ¬øQu√© tipo de transporte utilizar√°s?</p>
                            <button onClick={() => handleTransport('sea')} className="w-full p-3 bg-blue-50 text-blue-700 rounded hover:bg-blue-100 font-medium border border-blue-200 flex items-center gap-2 justify-center">
                                <IconShip className="w-5 h-5"/> Mar√≠timo / V√≠as Navegables (Reglas FAS, FOB, CFR, CIF)
                            </button>
                            <button onClick={() => handleTransport('poly')} className="w-full p-3 bg-green-50 text-green-700 rounded hover:bg-green-100 font-medium border border-green-200 flex items-center gap-2 justify-center">
                                <IconTruck className="w-5 h-5"/> Polivalente / Multimodal (Reglas E, F, C, D)
                            </button>
                        </div>
                    )}

                    {step === 2 && transport === 'sea' && (
                        <div className="space-y-3">
                            <p className="mb-4 font-semibold">Paso 2: Si es Mar√≠timo, ¬øla mercanc√≠a viaja en contenedor?</p>
                            <button onClick={() => handleContainer(true)} className="w-full p-3 bg-purple-50 text-purple-700 rounded hover:bg-purple-100 font-medium border border-purple-200">
                                ‚úÖ S√≠, en contenedor
                            </button>
                            <button onClick={() => handleContainer(false)} className="w-full p-3 bg-gray-50 text-gray-700 rounded hover:bg-gray-100 font-medium border border-gray-200">
                                ‚ùå No, a granel / carga general (Recomendado FOB/FAS)
                            </button>
                            <button onClick={() => setStep(1)} className="text-sm text-gray-400 mt-2 underline">Volver al Paso 1</button>
                        </div>
                    )}

                    {step === 3 && (
                        <div className="text-center">
                            <p className="font-semibold mb-2">Paso 3: Recomendaci√≥n Inicial</p>
                            {transport === 'poly' || finalRecommendation === 'FCA' ? (
                                <>
                                    <p className="text-green-600 font-bold mb-4 text-xl">Recomendaci√≥n: FCA</p>
                                    <p className="text-sm text-gray-600 mb-4">Para transporte multimodal (a√©reo, terrestre o contenedor), **FCA** es el t√©rmino F m√°s seguro y vers√°til.</p>
                                    <button onClick={() => handleRecommendationAccept('FCA')} className="bg-indigo-600 text-white px-4 py-2 rounded shadow hover:bg-indigo-700">
                                        Ver An√°lisis FCA
                                    </button>
                                </>
                            ) : (
                                <>
                                    <p className="text-blue-600 font-bold mb-4 text-xl">Recomendaci√≥n: {finalRecommendation}</p>
                                    <p className="text-sm text-gray-600 mb-4">El t√©rmino **{finalRecommendation}** es el adecuado para tu tipo de carga y transporte mar√≠timo.</p>
                                    <button onClick={() => handleRecommendationAccept(finalRecommendation)} className="bg-indigo-600 text-white px-4 py-2 rounded shadow hover:bg-indigo-700">
                                        Ver An√°lisis Detallado
                                    </button>
                                </>
                            )}
                            <button onClick={handleReturnToWizard} className="block w-full text-sm text-gray-400 mt-4 underline">Reiniciar Asistente</button>
                        </div>
                    )}
                </div>
            );
        };

        const App = () => {
            const [selectedId, setSelectedId] = useState('EXW');
            const [presentationMode, setPresentationMode] = useState(false);
            const [tab, setTab] = useState('visualizer'); // 'visualizer' | 'wizard'

            const selectedTerm = incotermsData.find(t => t.id === selectedId);

            const handleRecommendation = (termId) => {
                setSelectedId(termId);
                setTab('visualizer');
            };

            return (
                <div className={`min-h-screen ${presentationMode ? 'bg-gray-900 text-white' : 'bg-gray-50 text-gray-800'}`}>
                    
                    {/* Header */}
                    <header className={`${presentationMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-b border-gray-200'} p-4 shadow-sm sticky top-0 z-10`}>
                        <div className="max-w-6xl mx-auto flex justify-between items-center">
                            <div className="flex items-center gap-2">
                                <span className="text-2xl">üì¶</span>
                                <h1 className="font-bold text-xl md:text-2xl tracking-tight">Incoterms¬Æ 2020 <span className="text-blue-500 font-light">Visualizer</span></h1>
                            </div>
                            <div className="flex gap-2">
                                {!presentationMode && (
                                    <div className="bg-gray-100 p-1 rounded-lg flex text-sm">
                                        <button 
                                            onClick={() => setTab('visualizer')}
                                            className={`px-3 py-1 rounded-md transition-colors ${tab === 'visualizer' ? 'bg-white shadow text-blue-600' : 'text-gray-500'}`}
                                        >Explorar</button>
                                        <button 
                                            onClick={() => setTab('wizard')}
                                            className={`px-3 py-1 rounded-md transition-colors ${tab === 'wizard' ? 'bg-white shadow text-blue-600' : 'text-gray-500'}`}
                                        >Asistente</button>
                                    </div>
                                )}
                                <button 
                                    onClick={() => setPresentationMode(!presentationMode)}
                                    className={`p-2 rounded-full hover:bg-opacity-20 hover:bg-gray-500 transition-all ${presentationMode ? 'text-yellow-400' : 'text-gray-600'}`}
                                    title="Modo Presentaci√≥n"
                                >
                                    <IconPresentation className="w-6 h-6" />
                                </button>
                            </div>
                        </div>
                    </header>

                    <main className="max-w-6xl mx-auto p-4 md:p-6">
                        
                        {tab === 'wizard' && !presentationMode ? (
                            <div className="flex justify-center mt-10">
                                <div className="w-full max-w-md">
                                    <Wizard onRecommend={handleRecommendation} />
                                </div>
                            </div>
                        ) : (
                            <div className="grid grid-cols-1 md:grid-cols-12 gap-6">
                                
                                {/* Sidebar Lista */}
                                <div className={`md:col-span-4 lg:col-span-3 space-y-2 ${presentationMode ? 'hidden' : 'block'}`}>
                                    <div className="overflow-y-auto max-h-[80vh] pr-2 custom-scrollbar">
                                        <p className="text-xs font-bold text-gray-400 uppercase tracking-wider mb-2 px-1">Cualquier Modo</p>
                                        {incotermsData.filter(t => t.type === 'any').map(term => (
                                            <TermCard 
                                                key={term.id} 
                                                term={term} 
                                                isSelected={selectedId === term.id} 
                                                onClick={() => setSelectedId(term.id)} 
                                            />
                                        ))}
                                        <p className="text-xs font-bold text-gray-400 uppercase tracking-wider mb-2 mt-4 px-1">Mar√≠timo</p>
                                        {incotermsData.filter(t => t.type === 'sea').map(term => (
                                            <TermCard 
                                                key={term.id} 
                                                term={term} 
                                                isSelected={selectedId === term.id} 
                                                onClick={() => setSelectedId(term.id)} 
                                            />
                                        ))}
                                    </div>
                                </div>

                                {/* Panel Principal */}
                                <div className={`${presentationMode ? 'md:col-span-12 max-w-4xl mx-auto' : 'md:col-span-8 lg:col-span-9'}`}>
                                    <div className={`${presentationMode ? 'bg-gray-800 border-gray-700' : 'bg-white'} rounded-2xl shadow-xl overflow-hidden border border-gray-200 transition-colors duration-300`}>
                                        
                                        {/* Header de la Tarjeta */}
                                        <div className={`p-6 md:p-8 border-b ${presentationMode ? 'border-gray-700 bg-gray-800' : 'border-gray-100 bg-gradient-to-r from-gray-50 to-white'}`}>
                                            <div className="flex justify-between items-start">
                                                <div>
                                                    <h2 className={`text-4xl md:text-5xl font-extrabold mb-2 ${presentationMode ? 'text-white' : 'text-gray-900'}`}>
                                                        {selectedTerm.id}
                                                    </h2>
                                                    <p className={`text-xl md:text-2xl font-light ${presentationMode ? 'text-gray-300' : 'text-gray-600'}`}>
                                                        {selectedTerm.name}
                                                    </p>
                                                </div>
                                                {/* Icono Principal: Usa la funci√≥n getTermIcon para el √≠cono espec√≠fico de la regla */}
                                                <div className={`p-3 rounded-full ${selectedTerm.type === 'sea' ? 'bg-blue-100 text-blue-600' : 'bg-green-100 text-green-600'}`}>
                                                    {getTermIcon(selectedTerm.id, selectedTerm.type, 'w-8 h-8')}
                                                </div>
                                            </div>
                                            <p className={`mt-4 text-lg leading-relaxed ${presentationMode ? 'text-gray-400' : 'text-gray-600'}`}>
                                                {selectedTerm.details}
                                            </p>
                                        </div>

                                        {/* Gr√°ficos */}
                                        <div className="p-6 md:p-8 space-y-8">
                                            
                                            {/* Secci√≥n Riesgo - UNIFICADA EN UNA SOLA BARRA */}
                                            <div>
                                                <div className="flex items-center gap-2 mb-4">
                                                    <div className="w-1 h-6 bg-red-500 rounded-full"></div>
                                                    <h3 className={`font-bold text-lg ${presentationMode ? 'text-gray-200' : 'text-gray-800'}`}>Transferencia de Riesgo</h3>
                                                </div>
                                                
                                                {/* Contenedor de la barra unificada y el Icono de Caja/Barco */}
                                                <div className="w-full bg-gray-200 rounded-full h-5 flex shadow-inner bar-container-relative">
                                                    
                                                    {/* Marcador de Riesgo (Caja universal) */}
                                                    <RiskMarker term={selectedTerm} />

                                                    {/* Riesgo del Vendedor (Azul) */}
                                                    <div 
                                                        className="h-full bg-blue-500 flex items-center justify-center text-[10px] text-white font-bold transition-width" 
                                                        style={{width: `${selectedTerm.sellerRisk}%`}}
                                                    >
                                                        {selectedTerm.sellerRisk > 5 ? <><IconWoman className="inline w-3 h-3 mr-1"/> Vendedor</> : ''}
                                                    </div>
                                                    {/* Riesgo del Comprador (Naranja) */}
                                                    <div 
                                                        className="h-full bg-orange-400 flex items-center justify-center text-[10px] text-yellow-900 font-bold transition-width" 
                                                        style={{width: `${selectedTerm.buyerRisk}%`}}
                                                    >
                                                        {selectedTerm.buyerRisk > 5 ? <><IconMan className="inline w-3 h-3 mr-1"/> Comprador</> : ''}
                                                    </div>
                                                </div>
                                                <div className="flex justify-between mt-2 text-xs uppercase font-bold tracking-widest text-gray-400">
                                                    <span>Origen</span>
                                                    <span>Destino</span>
                                                </div>
                                                <p className="text-xs text-gray-400 mt-2 text-right">El icono marca el punto exacto de transferencia del riesgo.</p>
                                            </div>

                                            {/* Secci√≥n Costo - UNIFICADA EN UNA SOLA BARRA */}
                                            <div>
                                                 <div className="flex items-center gap-2 mb-4">
                                                    <div className="w-1 h-6 bg-green-500 rounded-full"></div>
                                                    <h3 className={`font-bold text-lg ${presentationMode ? 'text-gray-200' : 'text-gray-800'}`}>Transferencia de Costo</h3>
                                                </div>
                                                <div className="relative pt-6 pb-2">
                                                    <div className="flex mb-2 items-center justify-between text-xs uppercase font-bold tracking-widest text-gray-400">
                                                        <span>Origen</span>
                                                        <span>Destino</span>
                                                    </div>
                                                    {/* Contenedor de la barra unificada y el Icono de D√≥lar */}
                                                    <div className="h-5 bg-gray-200 rounded-full flex bar-container-relative">
                                                        
                                                        {/* Icono de D√≥lar (Marca el punto de transferencia del Costo) */}
                                                        <IconDollar 
                                                            className="bar-icon-absolute text-green-600 w-6 h-6" 
                                                            style={{ left: `${selectedTerm.sellerCost}%` }} 
                                                            title="Transferencia de Costo"
                                                        />

                                                        {/* Vendedor (AZUL) */}
                                                        <div 
                                                            className="h-full bg-blue-500 flex items-center justify-center text-[10px] text-white font-bold transition-width" 
                                                            style={{width: `${selectedTerm.sellerCost}%`}}
                                                        >
                                                            {selectedTerm.sellerCost > 5 ? <><IconWoman className="inline w-3 h-3 mr-1"/> Vendedor</> : ''}
                                                        </div>
                                                        {/* Comprador (NARANJA) */}
                                                        <div 
                                                            className="h-full bg-orange-400 flex items-center justify-center text-[10px] text-yellow-900 font-bold transition-width" 
                                                            style={{width: `${selectedTerm.buyerCost}%`}}
                                                        >
                                                            {selectedTerm.buyerCost > 5 ? <><IconMan className="inline w-3 h-3 mr-1"/> Comprador</> : ''}
                                                        </div>
                                                    </div>
                                                    <p className="text-xs text-gray-400 mt-2 text-right">El icono marca el punto exacto donde la obligaci√≥n de pago se transfiere.</p>

                                                    {/* Bloque de Seguro para CIF/CIP */}
                                                    {(selectedTerm.id === 'CIF' || selectedTerm.id === 'CIP') && (
                                                        <div className="flex items-center justify-center p-2 mt-4 bg-teal-50 border-t border-teal-200 rounded-b-lg">
                                                            <span className="text-sm font-semibold text-teal-700 flex items-center gap-1">
                                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M14 22V10L8 5L2 10V22M2 10L12 3L22 10M12 22V15"/></svg>
                                                                SEGURO INCLUIDO ({selectedTerm.id === 'CIP' ? 'COBERTURA AMPLIA CL√ÅUSULA A' : 'COBERTURA M√çNIMA CL√ÅUSULA C'})
                                                            </span>
                                                        </div>
                                                    )}
                                                </div>
                                            </div>

                                            {/* Advertencias */}
                                            {(selectedTerm.id === 'FOB' || selectedTerm.id === 'CIF' || selectedTerm.id === 'CFR' || selectedTerm.id === 'FAS' || selectedTerm.id === 'EXW') && (
                                                <div className="mt-6 p-4 bg-amber-50 border border-amber-200 rounded-lg flex gap-3">
                                                    <IconAlert className="text-amber-600 flex-shrink-0" />
                                                    <div>
                                                        <h4 className="font-bold text-amber-800 text-sm">¬°Advertencia!</h4>
                                                        {selectedTerm.id === 'EXW' ? (
                                                            <p className="text-sm text-amber-700 mt-1">
                                                                EXW se recomienda **principalmente para comercio dom√©stico**. Su uso en transacciones internacionales puede generar dificultades para el vendedor con la prueba de exportaci√≥n. Considere FCA.
                                                            </p>
                                                        ) : (
                                                            <p className="text-sm text-amber-700 mt-1">
                                                                Esta regla es exclusiva para transporte mar√≠timo. Si la mercanc√≠a viaja en <strong>contenedor</strong>, se recomienda usar <strong>{selectedTerm.id === 'FOB' || selectedTerm.id === 'FAS' ? 'FCA' : 'CIP/CPT'}</strong>, ya que el riesgo en contenedores suele transferirse antes de cargar el buque.
                                                            </p>
                                                        )}
                                                    </div>
                                                </div>
                                            )}

                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}
                    </main>

                    <footer className="text-center p-6 text-gray-400 text-sm">
                        <p>¬© Manual Interactivo Incoterms 2020. Solo fines educativos.</p>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
